{% extends "base.html" %}
{% load humanize %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Main Dashboard{% endblock %}

{% block content %}
<div class="p-4 md:p-6 space-y-8">

    <!-- Section 1: Key Performance Indicators (KPIs) -->
    <div>
        <h2 class="text-xl font-bold mb-4">At a Glance</h2>
        <!-- Using 'stats' component for a more compact and aligned look -->
        <div class="stats shadow w-full">
            <div class="stat">
                <div class="stat-figure text-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                </div>
                <div class="stat-title">Pending Deliveries</div>
                <div class="stat-value text-secondary">{{ pending_deliveries_count|intcomma }}</div>
                <div class="stat-desc">Sales awaiting processing</div>
            </div>
            
            <div class="stat">
                <div class="stat-figure text-error">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                </div>
                <div class="stat-title">Total Receivables</div>
                <div class="stat-value text-error">RsÂ {{ total_receivables|floatformat:2|intcomma }}</div>
                <div class="stat-desc">Total outstanding balance</div>
            </div>
            
            <div class="stat">
                <div class="stat-figure text-warning">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <div class="stat-title">Pending Claims</div>
                <div class="stat-value">{{ pending_claims_count|intcomma }}</div>
                <div class="stat-desc">Awaiting stock adjustment</div>
            </div>

            <!-- Integrated To-Do List Card -->
            <a href="{% url 'dashboard:note_list' %}" class="stat hover:bg-base-200 transition-colors">
                <div class="stat-figure text-accent">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>
                </div>
                <div class="stat-title">To-Do List</div>
                <div class="stat-value text-accent">{{ incomplete_notes_count|intcomma }}</div>
                <div class="stat-desc">Incomplete tasks</div>
            </a>
        </div>
    </div>

    <!-- Section 2: Quick Navigation -->
    <div>
        <h2 class="text-xl font-bold mb-4">Quick Navigation</h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
            <!-- Card Link: Point of Sale -->
            <a href="{% url 'stock:sales' %}" class="card bg-base-100 shadow hover:shadow-lg transition-shadow text-center p-4 border border-base-300">
                <div class="text-primary text-4xl mx-auto mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg></div>
                <p class="font-semibold">Point of Sale</p>
            </a>
            <!-- Card Link: Sales Report -->
            <a href="{% url 'stock:sales_report' %}" class="card bg-base-100 shadow hover:shadow-lg transition-shadow text-center p-4 border border-base-300">
                <div class="text-secondary text-4xl mx-auto mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg></div>
                <p class="font-semibold">Sales Report</p>
            </a>
            <!-- Card Link: Ledgers Hub -->
             <a href="{% url 'accounts:transactions_hub' %}" class="card bg-base-100 shadow hover:shadow-lg transition-shadow text-center p-4 border border-base-300">
                <div class="text-accent text-4xl mx-auto mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-10 w-10">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z" />
                    </svg>
                </div>
                <p class="font-semibold">Ledgers Hub</p>
            </a>
            <!-- Card Link: Claims Hub -->
            <a href="{% url 'claim:claims_hub' %}" class="card bg-base-100 shadow hover:shadow-lg transition-shadow text-center p-4 border border-base-300">
                <div class="text-info text-4xl mx-auto mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-10 w-10">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
                    </svg>
                </div>
                <p class="font-semibold">Claims Hub</p>
            </a>
            <!-- You can add more links here as needed -->
        </div>
    </div>
</div>
{% endblock %}
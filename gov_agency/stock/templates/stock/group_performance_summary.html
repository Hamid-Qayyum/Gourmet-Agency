{% extends "base.html" %}
{% load humanize %}

{% block title %}{{ grouping_name }}{% endblock %}
{% block page_title %}{{ grouping_name }}{% endblock %}

{% block content %}
<div class="p-4 md:p-6">
        <!-- Monthly Summary Card -->
        <div class="card bg-base-100 shadow-xl flex">
            <div class="card-body">

                <div class="flex justify-between">
                <h2 class="card-title">Monthly Sales Totals</h2>

                <div class="flex justify-end mb-6 gap-2">
                    <a href="{% url 'stock:sales_by_group_hub' %}" class="btn btn-sm btn-success">Sales by Group</a>
                    <a href="{% url 'stock:performance_summary_hub' %}" class="btn btn-sm btn-outline">← Back to Group Selection</a>
                </div>
            </div>       
                <div class="overflow-x-auto max-h-96 mt-4">
                    <table class="table table-sm w-full">
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th class="text-right">Total Revenue</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in monthly_summary %}
                                <tr class="hover">
                                    <td>{{ entry.month|date:"F Y" }}</td>
                                    <td class="text-right font-semibold">Rs {{ entry.total_revenue|floatformat:2|intcomma }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2" class="text-center py-4 text-base-content/70">No monthly sales recorded for this group.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div>
            
        <div class="divider"></div>

        <!-- Daily Summary Card -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Daily Sales Totals</h2>
                <div class="overflow-x-auto max-h-96 mt-4">
                    <table class="table table-sm w-full">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th class="text-right">Total Revenue</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in daily_summary %}
                                <tr class="hover">
                                    <td>{{ entry.day|date:"l, F j, Y" }}</td>
                                    <td class="text-right font-semibold">Rs {{ entry.total_revenue|floatformat:2|intcomma }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2" class="text-center py-4 text-base-content/70">No daily sales recorded for this group.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}